# Лабораторная работа 1: Хаммурапи – Правитель Египта

Написанная программа представляет собой клон игры Хаммурапи - Правитель Египта, написанный на языке C++. <br />
Игра состоит из 10 раундов, в течение которых игрок, выступающий в роли правителя древнего Вавилона Хаммурапи, распоряжается ресурсами города. Ресурсами являются: население, акры земли и бушели пшеницы. Каждый раунд представляет один год правления. Каждый гражданин возделывает некоторое количество акров земли, в результате чего производится некоторое количество бушелей пшеницы. Эта пшеница может использоваться либо в качестве еды для граждан (которые при недостатке еды умирают от голода), либо в качестве семян для посева урожая на следующий год. Игрок также может покупать и продавать землю, используя пшеницу как валюту. Каждый раунд начинается с доклада советника «Мой повелитель, соизволь поведать тебе» о текущем состоянии дел в городе, состоящем из сборов пшеницы за прошлый год, акрах земли, занимаемых городом, и изменении в населении. После чего, советник спрашивает, сколько земли необходимо купить или продать в этом году, сколько пшеницы использовать на семена, и сколько пшеницы использовать в качестве еды. Игрок отвечает на эти вопросы вводя целые числа. Игра скрывает от игрока некоторую часть важной информации: правила и коэффициенты расчета параметров за раунд, но это сделано намеренно. Подбор этих параметров является частью игрового процесса. Разнообразие игре обеспечивает генератор случайных чисел. Цена земли определяется случайным образом в начале каждого раунда. Так же случайным образом определяются количество бушелей пшеницы собранных с каждого акра земли, количество пшеницы, съеденной крысами, и количество новых граждан, прибывших в город в прошлом году. В каждом году есть некоторая вероятность чумы, уменьшающей население города наполовину. Игра заканчивается после 10 раундов, или ранее, если все население города вымрет, или более 45 процентов населения умрут от голода в течение одного раунда.<br />

Игра реализована как консольное приложение для ОС Windows. Ввод и вывод осуществляются через <iostream>. В ней присутствует система сохранения прогресса, которая автоматически сохраняет данные о прогрессе в файл "save.dat" после каждого раунда, после чего спрашивает игрока, хочет ли он продолжить игру. При отрицательном ответе выполнение программы останавливается. Если при запуске игры программа обнаруживает файл сохранения, она спрашивает игрока, не хочет ли он продолжить сохраненную игру. При отрицательном ответе игра начинается заново и файл сохранения после первого раунда перезаписывается. Работа с файлами осуществляется с помощью <fstream>. Структура файла сохранения представляет собой разделенные переносом строки числа, отвечающие основным полям в игре, определяющим ее состояние.<br />

В игре присутствует проверка ввода, которая спросит игрока еще раз если он не ввел корректное число. Также корректность ввода проверяется после всех действий игрока, чтобы удостовериться что для них хватает населения, пшеницы и площади города (если не хватает выведется "О, повелитель, пощади нас! У нас только..." и информация о имеющихся ресурсах).<br />

По окончанию игры после 10 раундов игроку выставляется оценка в соответствии с критериями:<br />
  Среднегодовой процент умерших от голода P<br />
  Количество акров земли на одного жителя L<br />
Оценки:<br />
   Если P > 33% и L < 7 – плохо («Из-за вашей некомпетентности в управлении, народ устроил бунт, и изгнал вас их города. Теперь вы вынуждены влачить жалкое существование в изгнании»)<br />
  Если P > 10% и L < 9 – удовлетворительно («Вы правили железной рукой, подобно Нерону и Ивану Грозному. Народ вздохнул с
облегчением, и никто больше не желает видеть вас правителем»)<br />
  Если P > 3% и L < 10 – хорошо («Вы справились вполне неплохо, у вас, конечно, есть недоброжелатели, но многие хотели бы увидеть вас во главе города снова»)<br />
  В противном случае – отлично («Фантастика! Карл Великий, Дизраэли и Джефферсон вместе не справились бы лучше»)<br />

Также игра может закончится раньше если население дойдет до 0 или за год от голода умрет больше 45% людей.<br />

Пример вывода первых нескольких раундов в игре:
```
Обнаружена сохраненная игра. Продолжить ее? (y/n) n
Мой повелитель, соизволь поведать тебе о состоянии дел на начало твоего высочайшего правления
        Население города сейчас составляет 100 человек;
        Сейчас у нас 2800 бушеля пшеницы в амбарах;
        Город сейчас занимает 1000 акров;
        1 акр земли стоит сейчас 24 бушель.
Что пожелаешь, повелитель?
Сколько акров земли повелеваешь купить? 20
Сколько акров земли повелеваешь продать? 0
Сколько бушелей пшеницы повелеваешь съесть? 1800
Сколько акров земли повелеваешь засеять? 900
Мой повелитель, соизволь поведать тебе
        в году 1 твоего высочайшего правления
        10 человек умерли с голоду;
        Чума уничтожила половину населения;
        Население города сейчас составляет 45 человек;
        Мы собрали 5400 бушелей пшеницы, по 6 бушеля с акра;
        Крысы истребили 372 бушелей пшеницы, оставив 5098 бушеля в амбарах;
        Город сейчас занимает 1020 акров;
        1 акр земли стоит сейчас 17 бушель.
Игра сохранена. Хотите продолжть? (y/n) y
Что пожелаешь, повелитель?
Сколько акров земли повелеваешь купить? 0
Сколько акров земли повелеваешь продать? 0
Сколько бушелей пшеницы повелеваешь съесть? 1000
Сколько акров земли повелеваешь засеять? 1000
О, повелитель, пощади нас! У нас только 45 человек, 5098 бушелей пшеницы и 1020 акров земли!
Сколько акров земли повелеваешь купить? 0
Сколько акров земли повелеваешь продать? 0
Сколько бушелей пшеницы повелеваешь съесть? 1000
Сколько акров земли повелеваешь засеять? 300
Мой повелитель, соизволь поведать тебе
        в году 2 твоего высочайшего правления
        Население города сейчас составляет 45 человек;
        Мы собрали 1800 бушелей пшеницы, по 6 бушеля с акра;
        Крысы истребили 139 бушелей пшеницы, оставив 5609 бушеля в амбарах;
        Город сейчас занимает 1020 акров;
        1 акр земли стоит сейчас 25 бушель.
Игра сохранена. Хотите продолжть? (y/n) n
```

Пример файла сохранения приведен в этой папке ("save.dat").
